# Aplicaci√≥n Web Segura - Dise√±o de Arquitectura Empresarial

Este proyecto demuestra una **aplicaci√≥n web segura y escalable** desplegada en infraestructura AWS utilizando una arquitectura de dos servidores con cifrado TLS, hashing de contrase√±as BCrypt y autenticaci√≥n mediante API RESTful. La implementaci√≥n sigue las mejores pr√°cticas de seguridad y patrones arquitect√≥nicos.

**Autor**: Angie Ramos  
**Curso**: Taller de Arquitectura Empresarial  
**Instituci√≥n**: Universidad Escuela Colombiana de Ingenier√≠a Julio Garavito 
**Fecha**: Octubre 2025  
**Versi√≥n**: 1.0

## üìã Descripci√≥n del Proyecto

Esta aplicaci√≥n implementa un sistema de autenticaci√≥n seguro utilizando una arquitectura de dos servidores separados:

- **Servidor Apache**: Sirve el cliente HTML/JavaScript mediante HTTPS, proporcionando la interfaz de usuario de forma segura.
- **Servidor Spring Boot**: Proporciona servicios backend mediante una API REST segura, manejando la l√≥gica de autenticaci√≥n y almacenando contrase√±as como hashes BCrypt.

La aplicaci√≥n cumple con todos los requisitos del taller de arquitectura empresarial, incluyendo:

‚úÖ **Arquitectura de dos servidores** (Apache + Spring Boot)  
‚úÖ **Cifrado TLS/HTTPS** en ambos servidores  
‚úÖ **Cliente HTML+JavaScript as√≠ncrono**  
‚úÖ **API RESTful** con endpoints seguros  
‚úÖ **Hashing de contrase√±as BCrypt** para almacenamiento seguro  
‚úÖ **Configuraci√≥n CORS** para solicitudes entre or√≠genes  
‚úÖ **Despliegue en AWS** con instancias EC2  
‚úÖ **Certificados SSL** para conexiones seguras  
‚úÖ **Documentaci√≥n completa** y pruebas automatizadas

## üöÄ Comenzando

Estas instrucciones te permitir√°n obtener una copia del proyecto funcionando en tu m√°quina local para prop√≥sitos de desarrollo y pruebas. Consulta la secci√≥n de **Despliegue** para notas sobre c√≥mo desplegar el proyecto en un sistema en vivo.

### üìã Pre-requisitos

Qu√© cosas necesitas para instalar el software y c√≥mo instalarlas:

#### En tu m√°quina local (Windows/Mac/Linux):

```bash
# Git para clonar el repositorio
git --version

# Java 17 o superior
java -version

# Maven 3.6 o superior
mvn -version

# SSH client (generalmente viene preinstalado)
ssh -V
```

#### En AWS:

- **Cuenta de AWS** activa con permisos para crear instancias EC2
- **2 instancias EC2** t3.micro con Amazon Linux 2023
- **Security Groups** configurados para permitir:
  - Puerto 22 (SSH)
  - Puerto 80 (HTTP)
  - Puerto 443 (HTTPS)
- **Par de claves SSH** (.pem) para acceso a las instancias

### üîß Instalaci√≥n

Una serie de ejemplos paso a paso que te indica c√≥mo obtener un entorno de desarrollo ejecut√°ndose.

#### Paso 1: Clonar el Repositorio

```bash
# Clonar el proyecto
git clone https://github.com/tu-usuario/secure-application-design.git

# Navegar al directorio del proyecto
cd secure-application-design
```

#### Paso 2: Compilar la Aplicaci√≥n Localmente

```bash
# Compilar el proyecto con Maven
mvn clean package -DskipTests

# Verificar que el JAR se gener√≥ correctamente
ls -lh target/secure-app-0.0.1-SNAPSHOT.jar
```

Deber√≠as ver un archivo JAR de aproximadamente 20-30 MB.

#### Paso 3: Configurar las Instancias AWS

```bash
# Conectarse al Servidor Apache (reemplaza con tu IP, esta es la original)
ssh -i "SecurityDesignKey.pem" ec2-user@34.228.157.43

# Actualizar el sistema
sudo dnf update -y
```

#### Paso 4: Desplegar el Servidor Apache

```bash
# En el servidor Apache, ejecutar el script de deployment
chmod +x deploy-apache.sh
./deploy-apache.sh
```

El script instalar√° autom√°ticamente:
- Apache HTTP Server 2.4
- M√≥dulo mod_ssl para HTTPS
- Certificado SSL 
- Configuraci√≥n de seguridad

#### Paso 5: Desplegar el Servidor Spring

```bash
# Conectarse al Servidor Spring (reemplaza con tu IP, esta es la original usada en el laboratorio)
ssh -i "SecurityDesignKey.pem" ec2-user@54.236.29.198

# Ejecutar el script de deployment
chmod +x deploy-spring-improved.sh
./deploy-spring-improved.sh
```

El script instalar√° autom√°ticamente:
- Java 17 Amazon Corretto
- Maven 3.9
- Compilar√° la aplicaci√≥n
- Generar√° keystore SSL
- Crear√° servicio systemd
- Iniciar√° la aplicaci√≥n

#### Paso 6: Verificar la Instalaci√≥n

```bash
# En el servidor Spring, verificar que la API responde
curl -k https://localhost:443/api/status

# Deber√≠as ver algo como:
# {"service":"Spring Boot Secure API","users":2,"status":"OK","timestamp":"..."}
```
>>>>FOTOOOO api corriendo

#### Paso 7: Acceder a la Aplicaci√≥n

Abre tu navegador web y ve a:

```
http://34.228.157.43
```

Deber√≠as ver la p√°gina de login. Ingresa las credenciales de prueba:
- **Usuario**: `admin`
- **Contrase√±a**: `password123`

Al hacer clic en "Iniciar sesi√≥n", deber√≠as ver un mensaje verde:

```
‚úì Autenticaci√≥n Exitosa
Autenticaci√≥n exitosa - Bienvenido admin
```

Esto demuestra que:
- El servidor Apache est√° sirviendo el cliente HTML correctamente
- El cliente JavaScript puede comunicarse con el servidor Spring mediante HTTPS
- La autenticaci√≥n con BCrypt funciona correctamente

## üß™ Ejecutando las Pruebas

Explica c√≥mo ejecutar las pruebas automatizadas para este sistema.

### Pruebas de Extremo a Extremo

Estas pruebas verifican que todo el flujo de autenticaci√≥n funcione correctamente desde el cliente hasta el servidor backend.

#### Prueba 1: Verificar Estado del Servidor Spring

```bash
# Desde el servidor Spring o tu m√°quina local
curl -k https://54.236.29.198/api/status
```

**Resultado esperado:**
```json
{
  "service": "Spring Boot Secure API",
  "users": 2,
  "status": "OK",
  "timestamp": "2025-10-16T00:45:15.542915136"
}
```
>>>>FOTOOO api status

Esta prueba verifica que el servidor Spring est√° corriendo y respondiendo correctamente.

#### Prueba 2: Login con Credenciales V√°lidas

```bash
curl -k -X POST https://54.236.29.198/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"password123"}'
```
>>>>FOTOOOO true verificaci√≥n credenciales v√°lidas

**Resultado esperado:**
```json
{
  "success": true,
  "message": "Autenticaci√≥n exitosa - Bienvenido admin",
  "username": "admin",
  "timestamp": "2025-10-16T00:45:20.123456789"
}
```

Esta prueba verifica que:
- El endpoint `/api/login` funciona correctamente
- BCrypt valida correctamente las contrase√±as
- La respuesta JSON tiene el formato correcto

#### Prueba 3: Login con Credenciales Inv√°lidas

```bash
curl -k -X POST https://54.236.29.198/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"wrongpassword"}'
```
>>>>FOTOOO false ver m√°s

**Resultado esperado:**
```json
{
  "success": false,
  "message": "Contrase√±a incorrecta",
  "username": "admin"
}
```

Esta prueba verifica que el sistema rechaza correctamente las contrase√±as incorrectas.

#### Prueba 4: Usuario No Existente

```bash
curl -k -X POST https://54.236.29.198/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"noexiste","password":"cualquiera"}'
```
>>>>FOTOOOO juan false

**Resultado esperado:**
```json
{
  "success": false,
  "message": "Usuario no encontrado",
  "username": "noexiste"
}
```

### Pruebas de Integraci√≥n del Cliente

#### Prueba 5: Servidor Apache Sirve la P√°gina

```bash
# Verificar que Apache responde
curl http://34.228.157.43

# Deber√≠as ver el contenido HTML completo
```

#### Prueba 6: Prueba de Login desde el Navegador

1. Abrir: `http://34.228.157.43`
2. Ingresar usuario: `admin`
3. Ingresar contrase√±a: `password123`
4. Hacer clic en "Iniciar sesi√≥n"
5. **Verificar**: Mensaje verde "‚úì Autenticaci√≥n Exitosa" aparece

### Script de Pruebas Automatizadas

Puedes ejecutar todas las pruebas de una vez usando el script incluido:

```bash
# En el servidor Spring
chmod +x test-api.sh
./test-api.sh
```

Este script ejecuta autom√°ticamente todas las pruebas y muestra los resultados con colores:
- ‚úÖ Verde = Prueba exitosa
- ‚ùå Rojo = Prueba fallida
- ‚ö†Ô∏è Amarillo = Advertencia

### Pruebas de Seguridad

#### Verificar Hashing de Contrase√±as

```bash
# En el servidor Spring, verificar los logs
sudo journalctl -u secureapp | grep "hash"

# Deber√≠as ver los hashes BCrypt generados:
# Admin hash: $2a$10$Y7kQvUY0Q8aliNpBwWE57O...
# Angie hash: $2a$10$9.uFhOT1pYim0vrAVmwYbu...
```

Verifica que:
- Los hashes comienzan con `$2a$10$` (BCrypt con factor 10)
- Cada hash es diferente y √∫nico
- Las contrase√±as nunca aparecen en texto plano en los logs

#### Verificar Conexi√≥n TLS/HTTPS

```bash
# Verificar certificado SSL del servidor Spring
openssl s_client -connect 54.236.29.198:443 -showcerts

# Deber√≠as ver informaci√≥n del certificado SSL
```

### Monitoreo y Logs

#### Ver Logs del Servidor Spring en Tiempo Real

```bash
# En el servidor Spring
sudo journalctl -u secureapp -f
```

#### Ver Logs de Apache

```bash
# En el servidor Apache
sudo tail -f /var/log/httpd/access_log
sudo tail -f /var/log/httpd/error_log
```

### Resultados Esperados de las Pruebas

Todas las pruebas deber√≠an pasar exitosamente:

| Prueba | Resultado Esperado | Estado |
|--------|-------------------|--------|
| API Status | Responde con JSON | ‚úÖ |
| Login v√°lido | success: true | ‚úÖ |
| Login inv√°lido | success: false | ‚úÖ |
| Usuario no existe | "Usuario no encontrado" | ‚úÖ |
| Apache sirve HTML | C√≥digo 200 | ‚úÖ |
| Hashes BCrypt | Formato $2a$10$... | ‚úÖ |
| Conexi√≥n TLS | Certificado v√°lido | ‚úÖ |

## üèóÔ∏è Arquitectura del Sistema

### Dise√±o de Dos Servidores

La aplicaci√≥n utiliza una arquitectura moderna de dos servidores para separar las responsabilidades y mejorar la seguridad:
**Servidor 1: Apache Web Server**
- **Prop√≥sito**: Sirve el cliente HTML/JavaScript est√°tico
- **Seguridad**: HTTP con capacidad HTTPS
- **Instancia**: EC2 t3.micro (Amazon Linux 2023)
- **IP**: 34.228.157.43
- **Puertos**: 80 (HTTP), 443 (HTTPS), 22 (SSH)

**Servidor 2: Aplicaci√≥n Spring Boot**
- **Prop√≥sito**: Servicios backend de API REST
- **Seguridad**: HTTPS con TLS, hashing de contrase√±as BCrypt
- **Instancia**: EC2 t3.micro (Amazon Linux 2023)
- **IP**: 54.236.29.198
- **Puerto**: 443 (HTTPS), 22 (SSH)

### Flujo de Comunicaci√≥n

```
Navegador del Usuario ‚Üí Servidor Apache (HTTP/HTTPS) ‚Üí Entrega Cliente HTML/JS
     ‚Üì
     ‚îî‚îÄ‚îÄ‚Üí Servidor Spring (HTTPS) ‚Üí Endpoints de API REST ‚Üí Validaci√≥n BCrypt
```

### Diagrama de Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Usuario Final                           ‚îÇ
‚îÇ                  (Navegador Web)                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ HTTP/HTTPS
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Servidor 1: Apache HTTP Server                   ‚îÇ
‚îÇ            (EC2: 34.228.157.43)                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  - Sirve contenido est√°tico (HTML, CSS, JS)          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Puerto 80 (HTTP) y 443 (HTTPS)                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Certificado SSL configurado                       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚îÇ Fetch API (JavaScript)
                         ‚îÇ HTTPS
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Servidor 2: Spring Boot API                       ‚îÇ
‚îÇ           (EC2: 54.236.29.198)                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Controladores REST                                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - POST /api/login (Autenticaci√≥n)                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - GET  /api/status (Estado del servidor)            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - GET  /api/hello (Prueba de conectividad)          ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Spring Security                                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - BCrypt Password Encoder (Factor 10)               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Configuraci√≥n CORS                                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Validaci√≥n de autenticaci√≥n                       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  - Puerto 443 (HTTPS)                                       ‚îÇ
‚îÇ  - Certificado SSL                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Capas de la Arquitectura

| Capa | Componente | Tecnolog√≠a | Prop√≥sito |
|------|-----------|------------|-----------|
| **Presentaci√≥n** | Servidor Apache | Apache HTTP 2.4 | Servir contenido est√°tico |
| **L√≥gica del Cliente** | Cliente JavaScript | HTML5, ES6+ JS | Interfaz de usuario y solicitudes as√≠ncronas |
| **Aplicaci√≥n** | Spring Boot | Java 17, Spring 2.7 | L√≥gica de negocio y API |
| **Seguridad** | Spring Security | BCrypt, TLS | Autenticaci√≥n y cifrado |
| **Infraestructura** | AWS EC2 | Amazon Linux 2023 | Alojamiento en la nube |

## üîê Caracter√≠sticas de Seguridad

‚úÖ **Cifrado TLS/HTTPS**: Todos los datos en tr√°nsito est√°n cifrados  
‚úÖ **Hashing de Contrase√±as BCrypt**: Contrase√±as almacenadas de forma segura con salt  
‚úÖ **Configuraci√≥n CORS**: Control de recursos compartidos entre or√≠genes  
‚úÖ **Security Groups**: Reglas de firewall de AWS restringen el acceso  
‚úÖ **Certificados SSL**: Certificados SSL configurados en ambos servidores  
‚úÖ **Validaci√≥n de Entrada**: Validaci√≥n null-safe y sanitizaci√≥n de datos  
‚úÖ **Logging de Seguridad**: Registro detallado de intentos de autenticaci√≥n  

### Implementaci√≥n de Seguridad Detallada

#### 1. Hashing de Contrase√±as con BCrypt

```java
@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder(); // Factor de trabajo: 10
}

// Las contrase√±as NUNCA se almacenan en texto plano
String adminHash = passwordEncoder.encode("password123");
// Resultado: $2a$10$Y7kQvUY0Q8aliNpBwWE57OtQe...
```

**Caracter√≠sticas de BCrypt:**
- Factor de trabajo ajustable (actualmente 10)
- Salt √∫nico generado autom√°ticamente para cada contrase√±a
- Resistente a ataques de fuerza bruta
- Est√°ndar de la industria para almacenamiento de contrase√±as

#### 2. Cifrado TLS/HTTPS

**Servidor Apache:**
```apache
SSLEngine on
```

**Servidor Spring:**
```properties
server.ssl.enabled=true
server.ssl.key-store=/home/ec2-user/keystore.p12
server.ssl.key-store-password=password123
server.ssl.keyStoreType=PKCS12
```

#### 3. Configuraci√≥n CORS

```java
@Bean
CorsConfigurationSource corsConfigurationSource() {
    CorsConfiguration configuration = new CorsConfiguration();
    configuration.setAllowedOrigins(Arrays.asList(
        "http://34.228.157.43",
        "https://34.228.157.43",
        "http://54.236.29.198",
        "https://54.236.29.198"
    ));
    configuration.setAllowedMethods(Arrays.asList(
        "GET", "POST", "PUT", "DELETE", "OPTIONS", "HEAD"
    ));
    configuration.setAllowedHeaders(Arrays.asList("*"));
    configuration.setAllowCredentials(true);
    return source;
}
```

#### 4. Headers de Seguridad HTTP

```apache
Header always set Strict-Transport-Security "max-age=31536000"
Header always set X-Frame-Options "SAMEORIGIN"
Header always set X-Content-Type-Options "nosniff"
```

#### 5. Validaci√≥n de Entrada

```java
String inputUsername = user.getUsername() == null ? "" : user.getUsername().trim();
String inputPassword = user.getPassword() == null ? "" : user.getPassword();

if (inputUsername.isEmpty() || inputPassword.isEmpty()) {
    return ResponseEntity.ok(
        new LoginResponse(false, "Usuario y contrase√±a son requeridos", null)
    );
}
```  

## üöÄ Stack Tecnol√≥gico

### Frontend
- **HTML5** - Estructura de la p√°gina web
- **JavaScript (ES6+)** - L√≥gica del cliente y manejo de eventos
- **Fetch API** - Solicitudes as√≠ncronas al servidor
- **CSS3** - Estilos y dise√±o responsivo

### Backend
- **Java 17** - Lenguaje de programaci√≥n principal
- **Spring Boot 2.7.x** - Framework de aplicaci√≥n
- **Spring Security** - Autenticaci√≥n y autorizaci√≥n
- **BCrypt** - Algoritmo de hashing de contrase√±as
- **Maven 3.9** - Gesti√≥n de dependencias y construcci√≥n

### Infraestructura
- **AWS EC2** - Instancias de computaci√≥n en la nube
- **Amazon Linux 2023** - Sistema operativo
- **Apache HTTP Server 2.4** - Servidor web
- **OpenSSL** - Generaci√≥n de certificados SSL

### Herramientas de Desarrollo
- **Git** - Control de versiones
- **cURL** - Pruebas de API
- **systemd** - Gesti√≥n de servicios
- **journalctl** - Visualizaci√≥n de logs

## üì¶ Estructura del Proyecto

```
Secure-Application-Design/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ       ‚îú‚îÄ‚îÄ java/com/angie/secureapp/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ SecureAppApplication.java      # Aplicaci√≥n principal Spring Boot
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ PasswordVerifier.java          # Utilidad para verificar hashes
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SecurityConfig.java        # Configuraci√≥n de Spring Security
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ApiController.java         # Endpoints REST
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ User.java                  # Modelo de usuario
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ LoginResponse.java         # Modelo de respuesta
‚îÇ       ‚îî‚îÄ‚îÄ resources/
‚îÇ           ‚îî‚îÄ‚îÄ application.properties         # Configuraci√≥n de la aplicaci√≥n
‚îú‚îÄ‚îÄ index.html                                 # Cliente web
‚îú‚îÄ‚îÄ pom.xml                                    # Dependencias Maven
‚îú‚îÄ‚îÄ README.md                                  # Este archivo
‚îú‚îÄ‚îÄ deploy-apache.sh                          # Script de despliegue Apache
‚îú‚îÄ‚îÄ deploy-spring-improved.sh                 # Script de despliegue Spring
‚îú‚îÄ‚îÄ test-api.sh                               # Script de pruebas automatizadas
```

### Descripci√≥n de Archivos Principales

| Archivo | Descripci√≥n |
|---------|-------------|
| `SecureAppApplication.java` | Punto de entrada de la aplicaci√≥n Spring Boot |
| `ApiController.java` | Define los endpoints REST y l√≥gica de autenticaci√≥n |
| `SecurityConfig.java` | Configuraci√≥n de Spring Security, CORS y BCrypt |
| `index.html` | Interfaz de usuario del cliente web |
| `application.properties` | Configuraci√≥n del servidor, SSL y logging |
| `pom.xml` | Definici√≥n de dependencias Maven |
| `deploy-apache.sh` | Script automatizado para instalar y configurar Apache |
| `deploy-spring-improved.sh` | Script automatizado para desplegar Spring Boot |

## üîß Endpoints de la API

### POST /api/login
Autenticar usuario con nombre de usuario y contrase√±a.

**Solicitud:**
```json
{
  "username": "admin",
  "password": "password123"
}
```

**Respuesta (√âxito):**
```json
{
  "success": true,
  "message": "Autenticaci√≥n exitosa - Bienvenido admin",
  "username": "admin",
  "timestamp": "2025-10-16T00:45:20.123456789"
}
```

**Respuesta (Fallo):**
```json
{
  "success": false,
  "message": "Contrase√±a incorrecta",
  "username": "admin",
  "timestamp": "2025-10-16T00:45:20.123456789"
}
```

**Ejemplo de uso con cURL:**
```bash
curl -k -X POST https://54.236.29.198/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"password123"}'
```

### GET /api/hello
Endpoint simple de saludo para probar conectividad.

**Respuesta:**
```json
{
  "message": "¬°Hola desde el servicio REST seguro!",
  "timestamp": "2025-10-16T00:45:15.542915136"
}
```

**Ejemplo de uso:**
```bash
curl -k https://54.236.29.198/api/hello
```

### GET /api/status
Endpoint de verificaci√≥n de estado que muestra el estado del servidor.

**Respuesta:**
```json
{
  "status": "OK",
  "service": "Spring Boot Secure API",
  "users": 2,
  "timestamp": "2025-10-16T00:45:15.542915136"
}
```

**Ejemplo de uso:**
```bash
curl -k https://54.236.29.198/api/status
```

## üë§ Credenciales de Prueba

| Usuario | Contrase√±a    | Descripci√≥n        | Hash BCrypt (Ejemplo) |
|---------|---------------|--------------------|-----------------------|
| admin   | password123   | Usuario administrador | $2a$10$Y7kQvUY0Q8aliNpBwWE57O... |
| angie   | angie123      | Usuario regular    | $2a$10$9.uFhOT1pYim0vrAVmwYbu... |

**Nota de Seguridad**: Estos son usuarios de demostraci√≥n. En producci√≥n, las contrase√±as deben cumplir con pol√≠ticas de seguridad robustas y los usuarios deben crearse din√°micamente desde una base de datos.

---

## ü§ù Contribuciones

Las contribuciones son lo que hacen que la comunidad de c√≥digo abierto sea un lugar incre√≠ble para aprender, inspirar y crear. Cualquier contribuci√≥n que hagas ser√° **muy apreciada**.

### C√≥mo Contribuir

1. **Fork el Proyecto**
   ```bash
   # Haz clic en el bot√≥n "Fork" en GitHub
   ```

2. **Crea tu Rama de Caracter√≠stica**
   ```bash
   git checkout -b feature/CaracteristicaIncreible
   ```

3. **Realiza tus Cambios**
   - Sigue las convenciones de c√≥digo del proyecto
   - Agrega comentarios claros y descriptivos
   - Actualiza la documentaci√≥n si es necesario

4. **Commit de tus Cambios**
   ```bash
   git commit -m 'Add: Agregada caracter√≠stica incre√≠ble'
   ```
   
   **Convenci√≥n de mensajes de commit:**
   - `Add:` - Nueva caracter√≠stica
   - `Fix:` - Correcci√≥n de bug
   - `Update:` - Actualizaci√≥n de c√≥digo existente
   - `Docs:` - Cambios en documentaci√≥n
   - `Style:` - Cambios de formato (no afectan funcionalidad)
   - `Refactor:` - Refactorizaci√≥n de c√≥digo
   - `Test:` - Agregando o actualizando tests

5. **Push a la Rama**
   ```bash
   git push origin feature/CaracteristicaIncreible
   ```

6. **Abre un Pull Request**
   - Describe claramente qu√© cambios realizaste
   - Referencia cualquier issue relacionado
   - Incluye screenshots si es aplicable

### Directrices de Contribuci√≥n

- **C√≥digo limpio**: Sigue las mejores pr√°cticas de Java/Spring Boot
- **Seguridad primero**: Cualquier cambio debe mantener o mejorar la seguridad
- **Testing**: Agrega tests para nuevas caracter√≠sticas
- **Documentaci√≥n**: Actualiza README y comentarios seg√∫n sea necesario
- **Commits at√≥micos**: Un commit por caracter√≠stica/fix

### Reportar Bugs

Si encuentras un bug, por favor abre un **Issue** con:
- Descripci√≥n clara del problema
- Pasos para reproducir
- Comportamiento esperado vs actual
- Screenshots si es aplicable
- Informaci√≥n del entorno (OS, Java version, etc.)

### Solicitar Caracter√≠sticas

Para solicitar nuevas caracter√≠sticas, abre un **Issue** con:
- Descripci√≥n detallada de la caracter√≠stica
- Casos de uso
- Beneficios esperados
- Posibles implementaciones

---

## üìå Versionamiento

Este proyecto usa [SemVer](http://semver.org/) para el versionamiento. 

### Historial de Versiones

#### **v1.0.0** - 2025-01-15
**Lanzamiento**
- ‚ú® Implementaci√≥n de autenticaci√≥n con Spring Security
- üîí Hashing de contrase√±as con BCrypt (factor 10)
- üåê API REST con endpoints de login y estado
- üñ•Ô∏è Frontend HTML/JavaScript con validaci√≥n
- üîê Configuraci√≥n SSL/TLS en ambos servidores
- üìã Configuraci√≥n CORS para comunicaci√≥n cross-origin
- üöÄ Scripts automatizados de despliegue
- üìö Documentaci√≥n
---

## ‚úíÔ∏è Autores

* **Angie Ramos** - *Desarrollo Completo* - [@AngieRamos](https://github.com/AngieRamos)
  - Dise√±o de arquitectura de seguridad
  - Implementaci√≥n backend con Spring Boot
  - Desarrollo frontend con JavaScript
  - Configuraci√≥n de infraestructura AWS
  - Documentaci√≥n t√©cnica

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE.md](LICENSE.md) para m√°s detalles.

---

## üéÅ Agradecimientos

Este proyecto fue desarrollado como parte del **Workshop de Enterprise Architecture** en la Universidad Escuela Colombiana de Ingenier√≠a.

### Reconocimientos Especiales

* **Profesores del Workshop**: Por proporcionar los requisitos y gu√≠a del proyecto
* **Universidad Escuela Colombiana de Ingenier√≠a**: Por el apoyo acad√©mico
* **Comunidad Spring Boot**: Por la excelente documentaci√≥n y frameworks
* **AWS**: Por proporcionar infraestructura cloud confiable
* **Stack Overflow**: Por resolver innumerables dudas t√©cnicas